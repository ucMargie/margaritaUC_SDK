"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var encoder_1=require("./encoder"),model_1=require("./model"),IntEncoder_1=require("./encoder/field/IntEncoder"),TCModel_1=require("./TCModel"),TCString=function(){function e(){}return e.encode=function(e,n){var r,o,t="";return e=encoder_1.SemanticPreEncoder.process(e,n),(o=Array.isArray(null===(r=n)||void 0===r?void 0:r.segments)?n.segments:new encoder_1.SegmentSequence(e,n)[""+e.version]).forEach((function(n,r){var d="";r<o.length-1&&(d="."),t+=encoder_1.SegmentEncoder.encode(e,n)+d})),t},e.decode=function(e,n){var r=e.split("."),o=r.length;n||(n=new TCModel_1.TCModel);for(var t=0;t<o;t++){var d=r[t],c=encoder_1.Base64Url.decode(d.charAt(0)).substr(0,encoder_1.BitLength.segmentType),i=model_1.SegmentIDs.ID_TO_KEY[IntEncoder_1.IntEncoder.decode(c,encoder_1.BitLength.segmentType).toString()];encoder_1.SegmentEncoder.decode(d,n,i)}return n},e}();exports.TCString=TCString;