import{S as t,F as e,C as a,b as n,D as s,W as i,c,d as o,L as r,e as p,f as u}from"./index-bf2a0917.js";import l from"./DefaultData-71eaabd8.js";var d,A;!function(t){t.API_INVALID_COMMAND="Usercentrics: (__uspapi) Invalid command: ",t.API_INVALID_CALLBACK="Usercentrics: (__uspapi) callback parameter not a function",t.INVALID_STRING="Usercentrics: ccpa string is invalid",t.RESHOW_AFTER_DAYS_INVALID="Usercentrics: reshow after days must be greater than 364.",t.SETTINGS_UNDEFINED="Usercentrics: ccpa is missing in setting"}(d||(d={})),function(t){t.ACCEPT="Y",t.DENY="N",t.UNKNOWN="-"}(A||(A={}));var f=function(t){return!(!t||!t.length||t[2]!==A.ACCEPT)},C=function(t){var e=t&&t.data&&t.data.__uspapiCall;e&&window[i](e.command,e.version,(function(a,n){!t.source||t.source instanceof MessagePort||t.source instanceof ServiceWorker||t.source.postMessage({__uspapiReturn:{callId:e.callId,returnValue:a,success:n}},"*")}))},g=function(l){function g(n,o,p){var u,g,m,v,O,_=l.call(this,o,p)||this;return _.isOptedOut=!1,_.iabAgreementExists=(null===(u=n.ccpa)||void 0===u?void 0:u.iabAgreementExists)||!1,_.isActive=(null===(g=n.ccpa)||void 0===g?void 0:g.isActive)||!1,_.region=(null===(m=n.ccpa)||void 0===m?void 0:m.region)||r.US_CA_ONLY,_.reshowAfterDays=(null===(v=n.ccpa)||void 0===v?void 0:v.reshowAfterDays)||365,_.showOnPageLoad=(null===(O=n.ccpa)||void 0===O?void 0:O.showOnPageLoad)||!1,t.getCcpaString()!==s?_.isOptedOut=f(t.getCcpaString()):_.setCcpaStorage(_.isOptedOut,A.UNKNOWN),function(){if(!Object.prototype.hasOwnProperty.call(window.frames,e)){var t=document.createElement("iframe");t.style.display="none",t.name=e,document.body.appendChild(t)}}(),window[i]=function(e,n,s){switch("function"!=typeof s&&console.warn(d.API_INVALID_CALLBACK),n!==a&&s({uspString:null,version:null},!1),e){case c.GET_USP_DATA:s({uspString:t.getCcpaString(),version:a},!0);break;case i:s(null,!0);break;default:console.warn(d.API_INVALID_COMMAND,e),s(null,!1)}},window.addEventListener("message",C,!1),_}return o(g,l),g.prototype.getIsOptedOut=function(){return this.isOptedOut},g.prototype.setCcpaStorage=function(e,i){void 0===i&&(i=A.ACCEPT),this.setIsOptedOut(e),e?t.setCcpaTimeStamp():t.clearCcpaData();var c=function(t,e,i){var c="".concat(a).concat(e).concat(t?A.ACCEPT:A.DENY).concat(i?A.ACCEPT:A.UNKNOWN);return n.test(c)||(c=s),c}(e,i,this.iabAgreementExists);p.isCrossDomainAvailable()&&p.setCrossDomainCcpaData({ccpaString:c,timestamp:t.getCcpaTimeStamp()}).catch((function(){console.warn(u.CROSS_DOMAIN_SET_DATA_FAILURE)})),t.setCcpaString(c)},g.prototype.setIsOptedOut=function(t){var e="boolean"==typeof t?t:f(t);this.isOptedOut=e},g}(l);export{g as default};
