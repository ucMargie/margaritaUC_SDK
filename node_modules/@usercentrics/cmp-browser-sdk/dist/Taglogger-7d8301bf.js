import{_ as t,a as e,A as n}from"./index-bf2a0917.js";var o=function(){function o(){this.apiInstance=n.getInstance()}return o.prototype.getTargets=function(n){var o=this;return n.reduce((function(n,r){if("mark"!==r.entryType&&"measure"!==r.entryType&&"paint"!==r.entryType){var a=r.name,i=o.extractSubdomain(a);if(-1===n.indexOf(i))return t(t([],e(n),!1),[i],!1)}return n}),[])},o.prototype.initTagLogger=function(){var t=this;window.addEventListener("beforeunload",(function(){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&t.updateLog()}))}))},o.prototype.extractSubdomain=function(t){var e,n=t.split("/");return t.indexOf("://")>-1?(e="".concat(n[2]),n[3]&&(e+="/".concat(n[3]))):(e="".concat(n[0]),n[1]&&(e+="/".concat(n[1]))),e="".concat(e.split("?")[0])},o.prototype.updateLog=function(){if(Object.prototype.hasOwnProperty.call(window,"performance")&&"function"==typeof performance.getEntries){var t=window.performance.getEntries();this.apiInstance.updateTagLoggerData(this.getTargets(t))}else console.log("UC Warning: tag logger functionality is not supported by your browser.")},o}();export{o as default};
